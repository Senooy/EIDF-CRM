# EIDF CRM - Configuration Production
# Copiez ce fichier vers .env.production et configurez les valeurs

# ==============================================
# CONFIGURATION PRINCIPALE
# ==============================================
NODE_ENV=production
APP_BASE_URL=https://votre-domaine.com
HOSTNAME=votre-domaine.com

# ==============================================
# BASE DE DONNÉES
# ==============================================
POSTGRES_DB=eidf_crm
POSTGRES_USER=postgres
POSTGRES_PASSWORD=VotreMotDePasseSecurise123!

# URL de connexion complète (généré automatiquement)
DATABASE_URL=postgresql://postgres:${POSTGRES_PASSWORD}@database:5432/${POSTGRES_DB}?schema=public

# ==============================================
# REDIS CACHE
# ==============================================
REDIS_PASSWORD=VotreRedisMotDePasse456!
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379

# ==============================================
# FIREBASE AUTHENTIFICATION
# ==============================================
# Contenu du fichier service account JSON encodé en base64
# Obtenez-le depuis la console Firebase > Project Settings > Service Accounts
FIREBASE_SERVICE_ACCOUNT=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ==============================================
# CHIFFREMENT
# ==============================================
# Clé de chiffrement pour les données sensibles (32 caractères minimum)
ENCRYPTION_KEY=VotreCleDeChiffrementTresTresSecurise123456

# ==============================================
# CONFIGURATION EMAIL/SMTP
# ==============================================
SMTP_HOST=localhost
SMTP_PORT=25

# Emails par défaut
DEFAULT_FROM_EMAIL=noreply@votre-domaine.com
DEFAULT_FROM_NAME=EIDF CRM

# Configuration Postfix (optionnel)
ALLOWED_SENDER_DOMAINS=votre-domaine.com,autre-domaine.com
RELAYHOST=
RELAYHOST_USERNAME=
RELAYHOST_PASSWORD=

# ==============================================
# TRACKING ET LIENS
# ==============================================
TRACKING_BASE_URL=https://votre-domaine.com

# ==============================================
# LIMITES ET PERFORMANCE
# ==============================================
# Limites d'envoi d'emails
DEFAULT_DAILY_LIMIT=1000
DEFAULT_HOURLY_LIMIT=100

# Délais entre envois (en secondes)
DEFAULT_DELAY_MIN=30
DEFAULT_DELAY_MAX=180

# ==============================================
# SÉCURITÉ
# ==============================================
# Domaines autorisés pour CORS (séparés par des virgules)
CORS_ORIGINS=https://votre-domaine.com,https://www.votre-domaine.com

# ==============================================
# MONITORING ET LOGS
# ==============================================
# Niveau de log (error, warn, info, debug)
LOG_LEVEL=info

# Activer les métriques Prometheus (true/false)
ENABLE_METRICS=true

# ==============================================
# SAUVEGARDE
# ==============================================
# Rétention des sauvegardes (en jours)
BACKUP_RETENTION_DAYS=30

# ==============================================
# CONFIGURATION OPTIONNELLE
# ==============================================

# Configuration SSL/TLS
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/private.key

# Webhook pour notifications (Slack, Discord, etc.)
WEBHOOK_URL=

# API Keys externes (si nécessaires)
EXTERNAL_API_KEY=

# ==============================================
# VARIABLES DOCKER COMPOSE
# ==============================================

# Profils Docker Compose à activer (monitoring, backup, etc.)
COMPOSE_PROFILES=monitoring

# Port d'écoute externe (si différent de 80/443)
HTTP_PORT=80
HTTPS_PORT=443

# ==============================================
# NOTES DE CONFIGURATION
# ==============================================
# 1. Changez tous les mots de passe par défaut
# 2. Utilisez des mots de passe complexes (minimum 12 caractères)
# 3. La clé de chiffrement doit être unique et sécurisée
# 4. Configurez Firebase avant le premier déploiement
# 5. Testez la configuration SMTP avant la production
# 6. Assurez-vous que votre domaine pointe vers le serveur
# 7. Configurez SSL avec Certbot après le déploiement